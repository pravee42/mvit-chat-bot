function renderHTML(){const e=document.createElement("div");e.classList.add("container1");const n=document.createElement("div");n.id="container11",n.classList.add("container11","h-[90%]","border-2","rounded","rounded-xl","drop-shadow","bg-yellow-100","w-full","border-solid","p-4","relative","hidden","sm:h-[70%]","sm:w-[500px]");const t=document.createElement("iframe");t.classList.add("rounded-md"),t.width="100%",t.height="200",t.src="https://www.youtube-nocookie.com/embed/b298YNVcKKc?si=Bbb1uMiweP68v0u7",t.title="Sathishzuz",t.frameBorder="0",t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",t.referrerPolicy="strict-origin-when-cross-origin",t.allowFullscreen=!0,n.appendChild(t);const s=document.createElement("div");s.id="MessageList",s.classList.add("flex","flex-col","gap-2","items-start","w-100","overflow-auto","h-[330px]","sm:h-[450px]","mt-[10px]","mb-[50px]"),n.appendChild(s);const o=document.createElement("form");o.id="UserForm",o.classList.add("flex","flex-col","gap-4","sm:gap-10","items-center","w-full","justify-center","overflow-auto","h-full");o.innerHTML='\n    <p class="block text-gray-700 font-bold mb-2">Please Enter User Details</p>\n    <div class="w-full max-w-md mx-auto">\n      <label for="name" class="block text-gray-700 font-bold mb-2">User Name</label>\n      <input required type="text" id="name" placeholder="Name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />\n    </div>\n    <div class="w-full max-w-md mx-auto">\n      <label for="email" class="block text-gray-700 font-bold mb-2">Email</label>\n      <input required type="text" placeholder="Email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />\n    </div>\n    <div class="w-full max-w-md mx-auto">\n      <label for="contact" class="block text-gray-700 font-bold mb-2">Phone Number</label>\n      <input required id="contact" type="text" placeholder="Phone Number" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />\n    </div>\n    <button id="saveuserDetails" class="bg-blue-500 mt-2 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Continue</button>\n  ',n.appendChild(o);const a=document.createElement("div");a.id="bottomBox",a.classList.add("bottomBox","absolute","bottom-0","sm:bottom-2","items-center","gap-2");a.innerHTML='\n    <button id="clearCache" class="bg-blue-500 hover:bg-blue-600 text-white font-bold h-[50px] w-[100px] rounded focus:outline-none focus:shadow-outline">New +</button>\n    <form id="form" class="inputbox">\n      <input type="text" id="MessageInput" placeholder="Type your questions here" />\n      <div id="loader" class="absolute w-[30px] h-[30px] right-20 hidden">\n        <img src="./images/loader.gif" alt="Loader" />\n      </div>\n      <button id="sendbtn" class="button22 hover:shadow hover:shadow-xl">\n        <i class="bi bi-send text-white"></i>\n      </button>\n    </form>\n  ',n.appendChild(a),e.appendChild(n);const i=document.createElement("div");i.id="showBotToogle",i.classList.add("button1"),i.innerHTML='<i class="bi bi-robot"></i>',e.appendChild(i),document.body.appendChild(e)}renderHTML(),document.head.innerHTML+='\n<link\n  rel="stylesheet"\n  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"\n/>\n<meta charset="UTF-8" />\n<meta name="viewport" content="width=device-width, initial-scale=1.0" />\n<link rel="preconnect" href="https://fonts.googleapis.com" />\n<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />\n<link\n  href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"\n  rel="stylesheet"\n/>',document.head.innerHTML+='\n<style>\n:root {\n  font-family: "Poppins", sans-serif !important;\n}\n\n.container1 {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: end;\n  gap: 10px;\n  padding: 10px;\n}\n\n.button1 {\n  width: 50px;\n  height: 50px;\n  border-radius: 100px;\n  background-color: rgb(61, 43, 226);\n  color: antiquewhite;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 1px 10px #4d3ab78a;\n  transition: 0.2s all ease-in-out;\n}\n\n.bottomBox {\n  width: 90%;\n}\n\n.button1:hover {\n  box-shadow: -1px 2px 21px #673ab78a;\n}\n\n.bounce {\n  animation: up-down 2s ease-in-out infinite;\n}\n\n@keyframes up-down {\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-5px);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n.button22 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 50px;\n  height: 50px;\n  border-radius: 4px;\n  padding: 10px 11px;\n  background: linear-gradient(180deg, #09bddd 0%, #2c48df 100%);\n  cursor: pointer;\n  box-shadow: 0px 0px 6.033519744873047px 0px rgba(0, 0, 0, 0.1);\n  outline: none;\n  border: none;\n}\n\n.inputbox {\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  width: 100%;\n  margin-top: 24px;\n  align-items: center;\n}\n\n.inputbox input {\n  border-radius: 4px;\n  outline: none;\n  width: 100%;\n  padding: 6px 22px;\n  height: 50px;\n  border: 1.01px solid #e5e7eb;\n}\n\n@media screen and (max-width: 600px) {\n  .inputbox input {\n    border-radius: 4px;\n    padding: 4px 22px;\n    height: 40px;\n  }\n  .button22 {\n    width: 40px;\n    height: 40px;\n    padding: 4px 11px;\n  }\n}\n\n.message-card-admin {\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: start;\n  text-align: end;\n  width: 100% !important;\n}\n\n.message-card-bot {\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  align-items: start;\n  text-align: end;\n}\n\n.message-card-admin .message {\n  margin-right: 16px;\n}\n\n.message-card-bot .message {\n  background-color: #8bc34a26;\n  padding: 4px 10px;\n  color: #000000;\n  max-width: 70%;\n  overflow-x: auto;\n  margin-top:10px;\n}\n\n.message {\n  border-radius: 14px;\n  background-color: #546fff;\n  font-size: 16px;\n  font-weight: 400;\n  padding: 4px 10px;\n  line-height: 30px;\n  text-align: left;\n  color: #ffffff;\n}\n\n.bot {\n  top: 20px;\n  left: 500px;\n}\n\n.bot svg {\n  height: 150px;\n  width: 243px;\n}\n\nimg {\n  width: 60px;\n}\n\n@media screen and (max-width: 700px) {\n  .container11 {\n    width: 90% !important;\n  }\n\n  .message {\n    font-size: 12px;\n    line-height: 20px;\n  }\n  img {\n    width: 40px;\n  }\n}\n\n::-webkit-scrollbar {\n  width: 4px;\n}\n\n.container1 {\n  padding: 10px;\n}\n\n.container1::-webkit-scrollbar {\n  width: 4px;\n}\n\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 10px 10px #d5e6f7;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: #09bddd;\n}\n\n.container1::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 10px 10px #d5e6f7;\n}\n\n.container1::-webkit-scrollbar-thumb {\n  background-color: #09bddd;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.fade-in {\n  animation: fadeIn 0.5s ease-in-out forwards;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.rotate {\n  animation: rotate 0.5s linear forwards;\n}\n\nmenu, ol, ul {\n  list-style: decimal !important;\n  margin: auto !important;\n  padding: 10px 15px !important;\n}\n\na {\n  color: blue !important; \n  text-decoration: underline; \n}\n\na:hover {\n  color: red !important; \n}\n</style>\n';import{marked}from"https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";const MessageInput=document.querySelector("#MessageInput"),MessageList=document.querySelector("#MessageList"),HOST="https://mita2-03014e0e72c1.herokuapp.com",userDetails=!!localStorage.getItem("userDetails")&&localStorage.getItem("userDetails");var TryAgain=!1,messagesData=[{user:"bot",message:"Hi I am MITA, How can I Help You?"}];function scrollToBottom(){MessageList.scrollTop=MessageList.scrollHeight}const loading=e=>{const n=document.querySelector("#loader"),t=document.querySelector("#sendbtn");!0===e?(n.classList.remove("hidden"),n.classList.add("flex"),MessageInput.disabled=!0,MessageInput.placeholder="Thinking...",MessageInput.classList.add("cursor-not-allowed"),t.classList.add("cursor-not-allowed"),t.classList.add("disabled"),t.disabled=!0):(n.classList.add("hidden"),n.classList.remove("flex"),MessageInput.disabled=!1,t.disabled=!1,t.classList.remove("cursor-not-allowed"),MessageInput.classList.remove("cursor-not-allowed"),t.classList.remove("disabled"),MessageInput.placeholder="Type your questions here")},sendMessages=async(e,n,t)=>{loading(!0),messagesData.push({user:"user",message:e}),displayMessages();const s=`${HOST}/chat?brain_id=${JSON.parse(localStorage.getItem("userDetails")).name}&user_name=${t}&prompt=${e}&level=student&phone=${JSON.parse(localStorage.getItem("userDetails")).contact}&email=${JSON.parse(localStorage.getItem("userDetails")).email}`;try{const e=await fetch(s);if(!e.ok)throw new Error("Network response was not ok");const n=await e.json(),t=await marked(n.message);messagesData.push({user:"bot",message:t?.toLowerCase().includes("admission")||t?.toLowerCase().includes("contact")?t+"\n for More admission Related Contact: 9498093535":t.toString()}),displayMessages()}catch(e){messagesData.push({user:"bot",message:"Cannot Process the request. Try Again"}),displayMessages(),console.error("There was a problem with the fetch operation:",e,"error")}loading(!1)},displayMessages=async()=>{MessageList.innerHTML="";try{messagesData.forEach((e=>{const n=document.createElement("div");n.classList.add("user"===e.user?"message-card-admin":"message-card-bot");const t=document.createElement("div");t.classList.add("user"===e.user?"profile":"reply");const s=document.createElement("img");s.setAttribute("src","bot"===e.user?"./images/logo.png":"https://th.bing.com/th/id/OIP.FZPwy2a4714RejChdfNfgwHaHa?rs=1&pid=ImgDetMain"),s.classList.add("rounded-full");const o=document.createElement("div");if(o.classList.add("message"),"bot"===e.user)o.innerHTML=marked(e.message);else{const n=e.message.toString();o.textContent=n}n.appendChild(t),t.appendChild(s),n.appendChild(o);const a=document.createElement("div");a.classList.add("w-full"),a.appendChild(n),a.appendChild(document.createElement("br")),MessageList.appendChild(a)}))}catch(e){console.log(e)}scrollToBottom()};function generateRandomUUID(){let e="";const n="0123456789abcdef";for(let t=0;t<16;t++)e+=n.charAt(Math.floor(16*Math.random()));return e}displayMessages();const setBrainData=()=>{if(!localStorage.getItem("brainId")){const e=generateRandomUUID();localStorage.setItem("brainId",e)}};setBrainData(),document.querySelector("#sendbtn").addEventListener("click",(function(){localStorage.getItem("brainId");sendMessages(MessageInput.value,0,JSON.parse(localStorage.getItem("userDetails")).name),MessageInput.value=""})),document.querySelector("#form").addEventListener("submit",(function(){const e=localStorage.getItem("brainId");sendMessages(MessageInput.value,0,e),MessageInput.value=""}));const ShowBotValue=document.querySelector("#container11"),showBotToogle=document.querySelector("#showBotToogle"),ShowBot=()=>{ShowBotValue.classList.contains("hidden")?(ShowBotValue.classList.remove("hidden"),ShowBotValue.classList.add("block"),ShowBotValue.classList.add("fade-in"),showBotToogle.innerHTML='<i class="bi bi-x"></i>',showBotToogle.classList.add("rotate")):ShowBotValue.classList.contains("block")&&(ShowBotValue.classList.add("hidden"),ShowBotValue.classList.remove("block"),showBotToogle.classList.remove("rotate"),showBotToogle.innerHTML='<i class="bi bi-robot"></i>')};async function LoadMessages(){if(localStorage.getItem("userDetails")){const e=JSON.parse(localStorage.getItem("userDetails")),n=`${HOST}/history?phone=${e.contact}`;try{const e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();t.history.map((async e=>{const n="assistant"===await e.role?marked(e.content):e.content.toString();messagesData.push({user:"assistant"===e.role?"bot":"user",message:n?.toLowerCase().includes("admission")||n?.toLowerCase().includes("contact")?n+"\n for More admission Related Contact: 9498093535":n}),displayMessages(),scrollToBottom()}))}catch(e){console.error("There was a problem with the fetch operation:",e)}}}function showMessages(){const e=document.getElementById("MessageList"),n=document.getElementById("UserForm"),t=document.getElementById("bottomBox");e.classList.remove("hidden"),e.classList.add("flex"),n.classList.add("hidden"),n.classList.remove("flex"),t.classList.add("flex"),t.classList.remove("hidden")}function showForm(){const e=document.getElementById("MessageList"),n=document.getElementById("UserForm"),t=document.getElementById("bottomBox");e.classList.add("hidden"),e.classList.remove("flex"),n.classList.remove("hidden"),n.classList.add("flex"),t.classList.remove("flex"),t.classList.add("hidden")}function saveUserDetails(e){e.preventDefault();const n=document.getElementById("name").value,t=document.getElementById("email").value,s=document.getElementById("contact").value;if(""!==t&&""!==s&&""!==n){fetch(`${HOST}/saveuser?phone=${s}&name=${n}&email=${t}`);const e={name:n,email:t,contact:s};localStorage.setItem("userDetails",JSON.stringify(e)),showMessages(),LoadMessages()}else alert("Please Fill All the Fields")}document.querySelector("#showBotToogle").addEventListener("click",(function(){ShowBotValue.classList.contains("hidden")?(ShowBotValue.classList.remove("hidden"),ShowBotValue.classList.add("block"),ShowBotValue.classList.add("fade-in"),showBotToogle.innerHTML='<i class="bi bi-x"></i>',showBotToogle.classList.add("rotate")):ShowBotValue.classList.contains("block")&&(ShowBotValue.classList.add("hidden"),ShowBotValue.classList.remove("block"),showBotToogle.classList.remove("rotate"),showBotToogle.innerHTML='<i class="bi bi-robot"></i>')}));const saveUserButton=document.getElementById("saveuserDetails");async function Clearhistory(){const e=`${HOST}/clear_history?phone=${JSON.parse(localStorage.getItem("userDetails")).contact}`;await fetch(e)}saveUserButton.addEventListener("click",saveUserDetails),userDetails?(showMessages(),LoadMessages()):(showForm(),LoadMessages()),document.getElementById("clearCache").addEventListener("click",Clearhistory);